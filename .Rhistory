library(gdata)
url <- "http://lpi.worldbank.org/sites/default/files/International_LPI_from_2007_to_2016.xlsx"
lpi_raw <- read.xls(url)
lpi_raw
View(lpi_raw)
library(dplyr)
library(magrittr)
lpi_raw %>%
.[-1, ]
?select
lpi_raw %>%
.[-1, ] %>%
select(-contains("x."))
lpi <- lpi_raw %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness"))
View(lpi)
?read.xls
lpi_raw <- read.xls(url, sheet = "2016")
lpi_raw <- read.xls(url, sheet = `2016`)
lpi_raw <- read.xls(url, sheet = 2016)
lpi_raw <- read.xls(url, sheet = 5)
lpi_raw_2007 <- read.xls(url, sheet = 4) %>% mutate(Year = 2007)
View(lpi_raw_2007)
lpi_raw_2007 <- read.xls(url, sheet = 4) %>% mutate(Year = 2007)
lpi_raw_2010 <- read.xls(url, sheet = 3) %>% mutate(Year = 2010)
lpi_raw_2012 <- read.xls(url, sheet = 2) %>% mutate(Year = 2012)
lpi_raw_2014 <- read.xls(url, sheet = 1) %>% mutate(Year = 2014)
lpi_raw_2016 <- read.xls(url, sheet = 5) %>% mutate(Year = 2016)
ls()
rm(url)
rm(lpi, lpi_raw)
lpi <- data.frame(NULL)
raw_files <- ls()
rm(lpi)
raw_files <- ls()
lpi <- data.frame(NULL)
for(i in ls()){
i <- i %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness", "Year"))
lpi <- rbind(lpi, i)
}
for(i in raw_files){
i <- i %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness", "Year"))
lpi <- rbind(lpi, i)
}
View(lpi_raw_2007)
for(i in raw_files) names(i)
sapply(ls(), get)
dfs <- ls()[sapply(mget(ls(), .GlobalEnv), is.data.frame)]
str(dfs)
sapply( dfs, function(x)  str( get( x ) ) )
mget(raw_files[1])
for(i in raw_files){
i <- mget(raw_files[i]) %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness", "Year"))
lpi <- rbind(lpi, i)
}
for(i in raw_files) names(mget(i))
for(i in raw_files) names(mget(raw_files[i]))
names(lpi_raw_2007)
names(lpi_raw_2010)
rm(lpi_raw_2007)
for(i in raw_files){
i <- mget(raw_files[i]) %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness", "Year"))
lpi <- rbind(lpi, i)
}
lpi <- data.frame(NULL)
for(i in raw_files){
i <- mget(raw_files[i]) %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness", "Year"))
lpi <- rbind(lpi, i)
}
rm(lpi, raw_files, i, dfs)
raw_files <- list()
lpi <- data.frame(NULL)
for(i in raw_files){
i <- mget(raw_files[i]) %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness", "Year"))
lpi <- rbind(lpi, i)
}
rm(lpi, i, raw_files)
raw_files <- ls()
lpi <- data.frame(NULL)
for(i in raw_files){
i <- mget(raw_files[i]) %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness", "Year"))
lpi <- rbind(lpi, i)
}
mget(raw_files[i]) %>%
.[-1, ]
mget(raw_files[i])
get(i)
get(raw_files[i])
get(i) %>%
.[-1, ]
for(i in raw_files){
i <- get(i) %>%
.[-1, ] %>%
select(-contains("x.")) %>%
set_colnames(c("Country", "Overall LPI Score", "Overall LPI Rank",
"Customs", "Infrastructure", "International Shipments",
"Logistics Quality & Competence", "Tracking & Tracing",
"Timeliness", "Year"))
lpi <- rbind(lpi, i)
}
View(lpi)
rm(-lpi)
rm(c(raw_files))
rm(raw_files)
rm(raw_files, i, lpi_raw_2010, lpi_raw_2012, lpi_raw_2014, lpi_raw_2016)
?write.csv
write.csv(lpi, "data/lpi.csv", row.names = FALSE)
write.csv(lpi, "data/lpi.csv", row.names = FALSE)
shiny::runApp()
runApp()
runApp()
zipdata
runApp()
runApp()
library(readr)
read_csv("data/lpi")
read_csv("data/lpi.csv")
runApp()
runApp()
runApp()
data <- read_csv("data/lpi.csv")
names(data)
unique(as.character(data$Country)
)
runApp()
runApp()
unique(as.character(data$Country
)
)
runApp()
runApp()
runApp()
runApp()
str(data)
runApp()
runApp()
head(lpi)
runApp()
shinyApp(ui = ui, server = server)
read_csv("data/lpi.csv")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
